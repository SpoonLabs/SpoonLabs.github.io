<!DOCTYPE html>
<html lang="en">
<html>
  <head>

 <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content="quering,  quering, query, filter, ast, elements">
<title>Navigation and Query  | Spoon</title>
<link rel="stylesheet" type="text/css" href="css/syntax.css">
<link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="css/modern-business.css">
<link rel="stylesheet" type="text/css" href="css/lavish-bootstrap.css">
<link rel="canonical" href="/filter.html">
<link rel="stylesheet" type="text/css" href="css/customstyles.css">
<link rel="stylesheet" type="text/css" href="css/theme-mauve.css">
<link rel="canonical" href="/filter.html">
<link rel="alternate" type="application/rss+xml" title="" href="feed.xml" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->







 

  <script>
    $(function () {
        $('[data-toggle="tooltip"]').tooltip()
    })
  </script>

  </head>

  <body>

   <!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> Spoon</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                




                
                
                
                
                <li><a href="papers.html">Papers</a></li>
                
                
                
                
                
                <li><a href="ecosystem.html">Ecosystem</a></li>
                
                
                
                
                
                <li><a href="about.html">About</a></li>
                
                
                
                
                
                <li><a href="https://ci.inria.fr/sos/" target="_blank">Jenkins</a></li>
                
                
                
                
                
                <li><a href="https://github.com/INRIA/spoon" target="_blank">Github</a></li>
                
                
                
                


                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->

                <li class="dropdown">
                    
        </div>
        <!-- /.container -->
</nav>


    <!-- Page Content -->
    <div class="container">
      <div class="col-lg-12">&nbsp;</div>

      <!-- Content Row -->
<div class="row">
    <!-- Sidebar Column -->
    <div class="col-md-3">

        <script>

            $(document).ready(function() {
                        // Initialize navgoco with default options
                        $("#mysidebar").navgoco({
                            caretHtml: '',
                            accordion: true,
                            openClass: 'active', // open
                            save: false, // leave false or nav highlighting doesn't work right
                            cookie: {
                                name: 'navgoco',
                                expires: false,
                                path: '/'
                        },
                        slide: {
                            duration: 400,
                            easing: 'swing'
                                }
                                });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

            });

        </script>


        




        <ul id="mysidebar" class="nav">

            <div class="siteTagline">Spoon</div>

            
            
            
            <li><a href="#">Getting started</a>
                <ul>
                    
                    
                    
                    <li><a href="first_analysis_processor.html">Code Analysis</a></li>
                    

                    
            </li>
            
            
                    
                    
                    <li><a href="architecture_test.html">Architecture Checking</a></li>
                    

                    
            </li>
            
            
                    
                    
                    <li><a href="reflection.html">Runtime Reflection</a></li>
                    

                    
            </li>
            
            
                    
                    
                    <li><a href="custom-pretty-printing.html">Custom Java Pretty-Printing</a></li>
                    

                    
            </li>
            
            
                    
                    
                    <li><a href="processor.html">Processor for elements</a></li>
                    

                    
            </li>
            
            
                    
                    
                    <li><a href="/mvnsites/spoon-core/apidocs" target="_blank">Javadoc</a></li>
                    

                    
            </li>
            
            
                    
                    
                    <li><a href="spoon_javadoc.html">Javadoc Analysis</a></li>
                    

                    
            </li>
            
            
                    
                    
                    <li><a href="faq.html">FAQ</a></li>
                    

                    
            </li>
            
            
            </ul>
        </li>
        
        
            
            <li><a href="#">Querying source code elements</a>
                <ul>
                    
                    
                    
                    <li class="active"><a href="filter.html">AST Traversing</a></li>
                    

                    
            </li>
            
            
                    
                    
                    <li><a href="path.html">AST Paths and Roles</a></li>
                    

                    
            </li>
            
            
                    
                    
                    <li><a href="matcher.html">Matcher</a></li>
                    

                    
            </li>
            
            
                    
                    
                    <li><a href="pattern.html">Pattern</a></li>
                    

                    
            </li>
            
            
            </ul>
        </li>
        
        
            
            <li><a href="#">Code Transformation</a>
                <ul>
                    
                    
                    
                    <li><a href="first_transformation.html">Code Transformation</a></li>
                    

                    
            </li>
            
            
                    
                    
                    <li><a href="examples.html">Transformation Examples</a></li>
                    

                    
            </li>
            
            
                    
                    
                    <li><a href="processor_annotations.html">Transformation with annotations</a></li>
                    

                    
            </li>
            
            
                    
                    
                    <li><a href="template_definition.html">Transformation with Templates</a></li>
                    

                    
            </li>
            
            
                    
                    
                    <li><a href="spoon_smpl.html">Semantic patching</a></li>
                    

                    
            </li>
            
            
                    
                    
                    <li><a href="pattern.html#generator">Code Generation</a></li>
                    

                    
            </li>
            
            
                    
                    
                    <li><a href="testing_quickstart.html">Testing transformations</a></li>
                    

                    
            </li>
            
            
            </ul>
        </li>
        
        
            
            <li><a href="#">Usage</a>
                <ul>
                    
                    
                    
                    <li><a href="launcher.html">From Java</a></li>
                    

                    
            </li>
            
            
                    
                    
                    <li><a href="command_line.html">Command Line</a></li>
                    

                    
            </li>
            
            
                    
                    
                    <li><a href="maven.html">From Maven Plugin</a></li>
                    

                    
            </li>
            
            
                    
                    
                    <li><a href="gradle.html">From Gradle Plugin</a></li>
                    

                    
            </li>
            
            
            </ul>
        </li>
        
        
            
            <li><a href="#">Spoon Meta model</a>
                <ul>
                    
                    
                    
                    <li><a href="structural_elements.html">Structural elements</a></li>
                    

                    
            </li>
            
            
                    
                    
                    <li><a href="code_elements.html">Code elements</a></li>
                    

                    
            </li>
            
            
                    
                    
                    <li><a href="references.html">References</a></li>
                    

                    
            </li>
            
            
                    
                    
                    <li><a href="factories.html">Create elements with factories</a></li>
                    

                    
            </li>
            
            
                    
                    
                    <li><a href="comments.html">Comments and Positions</a></li>
                    

                    
            </li>
            
            
            </ul>
        </li>
        
        
        
        </ul>

        
    </div>
       <!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above.-->
    <script>$("li.active").parents('li').toggleClass("active");</script>


      <!-- Content Column -->
      <div class="col-md-9">

          <div class="post-header">
   <h1 class="post-title-main">Navigation and Query</h1>
</div>

<div class="post-content">

   

  <h3 id="getters">Getters</h3>

<p>All elements provide a set of appropriate getters to get the children of an element.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">methods</span> <span class="o">=</span> <span class="n">ctClass</span><span class="o">.</span><span class="na">getMethods</span><span class="o">();</span>
</code></pre></div></div>

<p>In addition, there exists a generic getter based on the role played by an element with respect to its parent. See <code class="language-plaintext highlighter-rouge">CtRole</code> (<a href="https://spoon.gforge.inria.fr/mvnsites/spoon-core/apidocs/spoon/reflect/path/CtRole.html">javadoc</a>) for a complete list of roles.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">methods</span> <span class="o">=</span> <span class="n">ctClass</span><span class="o">.</span><span class="na">getValueByRole</span><span class="o">(</span><span class="nc">CtRole</span><span class="o">.</span><span class="na">METHOD</span><span class="o">);</span>
</code></pre></div></div>

<p>While not recommended, it is also possible to get all direct children of an element</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">allDescendants</span> <span class="o">=</span> <span class="n">ctElement</span><span class="o">.</span><span class="na">getDirectChildren</span><span class="o">();</span>
</code></pre></div></div>

<h3 id="filters">Filters</h3>

<p>A Filter defines a predicate of the form of a <code class="language-plaintext highlighter-rouge">matches</code> method that
returns <code class="language-plaintext highlighter-rouge">true</code> if an element has to be selected in the filtering operation.
A Filter is given as parameter to <code class="language-plaintext highlighter-rouge">CtElement#getElement(Filter)</code> (or <code class="language-plaintext highlighter-rouge">CtQueryable#filterChildren(Filter)</code>) which implements a depth-first search algorithm. During AST traversal, the elements satisfying the matching predicate are selected by the filter.</p>

<p>Here are code examples about the usage of filters. The first example returns all AST nodes of type <code class="language-plaintext highlighter-rouge">CtAssignment</code>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// collecting all assignments of a method body</span>
<span class="n">list1</span> <span class="o">=</span> <span class="n">methodBody</span><span class="o">.</span><span class="na">getElements</span><span class="o">(</span><span class="k">new</span> <span class="nc">TypeFilter</span><span class="o">(</span><span class="nc">CtAssignment</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
</code></pre></div></div>

<p>The second example selects all deprecated classes.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// collecting all deprecated classes</span>
<span class="n">list2</span> <span class="o">=</span> <span class="n">rootPackage</span><span class="o">.</span><span class="na">getElements</span><span class="o">(</span><span class="k">new</span> <span class="nc">AnnotationFilter</span><span class="o">(</span><span class="nc">Deprecated</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
</code></pre></div></div>

<p>Now let’s consider a user-defined filter that only matches public fields across all classes.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// creating a custom filter to select all public fields</span>
<span class="n">list3</span> <span class="o">=</span> <span class="n">rootPackage</span><span class="o">.</span><span class="na">filterChildren</span><span class="o">(</span>
  <span class="k">new</span> <span class="nc">AbstractFilter</span><span class="o">&lt;</span><span class="nc">CtField</span><span class="o">&gt;(</span><span class="nc">CtField</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">matches</span><span class="o">(</span><span class="nc">CtField</span> <span class="n">field</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">field</span><span class="o">.</span><span class="na">getModifiers</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="nc">ModifierKind</span><span class="o">.</span><span class="na">PUBLIC</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">).</span><span class="na">list</span><span class="o">();</span>
</code></pre></div></div>

<h3 id="scanners">Scanners</h3>

<p><code class="language-plaintext highlighter-rouge">CtScanner</code> provides a simple way to visit a node and its children.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//Scanner counting the number of CtFieldWrite</span>
<span class="kd">class</span> <span class="nc">CounterScanner</span> <span class="kd">extends</span> <span class="nc">CtScanner</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">visited</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="kt">void</span> <span class="nf">visitCtFieldWrite</span><span class="o">(</span><span class="nc">CtFieldWrite</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">fieldWrite</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">visited</span><span class="o">++;</span>
	<span class="o">}</span>
<span class="o">}</span>

<span class="nc">CounterScanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CounterScanner</span><span class="o">();</span>

<span class="c1">//Run the scanner on an element, here the CtClass representing FieldAccessRes</span>
<span class="n">launcher</span><span class="o">.</span><span class="na">getFactory</span><span class="o">().</span><span class="na">Class</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="s">"FieldAccessRes"</span><span class="o">).</span><span class="na">accept</span><span class="o">(</span><span class="n">scanner</span><span class="o">);</span>

<span class="c1">//scanner.visited now contains the number of children of type CtFieldWrite </span>
<span class="n">assertEquals</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">scanner</span><span class="o">.</span><span class="na">visited</span><span class="o">);</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">EarlyTerminatingScanner</code> is a specialized Class implementing <code class="language-plaintext highlighter-rouge">CtScanner</code> that stops once <code class="language-plaintext highlighter-rouge">terminate()</code> has been called.</p>

<p>See also <code class="language-plaintext highlighter-rouge">CtVisitor</code> (<a href="https://spoon.gforge.inria.fr/mvnsites/spoon-core/apidocs/spoon/reflect/visitor/CtVisitor.html">javadoc</a>).</p>

<h3 id="iterator">Iterator</h3>

<p><code class="language-plaintext highlighter-rouge">CtIterator</code> provides an iterator on all transitive children of a node in depth first order.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">CtIterator</span> <span class="n">iterator</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CtIterator</span><span class="o">(</span><span class="n">root</span><span class="o">);</span>
<span class="k">while</span> <span class="o">(</span><span class="n">iterator</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span>
	<span class="nc">CtElement</span> <span class="n">el</span> <span class="o">=</span> <span class="n">iterator</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
	<span class="c1">//do something on each child of root</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">CtBFSIterator</code> is similar to <code class="language-plaintext highlighter-rouge">CtIterator</code> but in Breadth first order.</p>

<h3 id="queries">Queries</h3>

<p>The Query, introduced in Spoon 5.5 by Pavel Vojtechovsky, is an improved filter mechanism:</p>

<ul>
  <li>queries can be done with a Java 8 lambda</li>
  <li>queries can be chained</li>
  <li>queries can be reused on multiple input elements</li>
</ul>

<p><strong>Queries with Java8 lambdas</strong>: <code class="language-plaintext highlighter-rouge">CtQueryable#map(CtFunction)</code>enables you to give Java 8 lambda as query.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// returns a list of String</span>
<span class="n">list</span> <span class="o">=</span> <span class="kn">package</span><span class="nn">.map</span><span class="o">((</span><span class="nc">CtClass</span> <span class="n">c</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">c</span><span class="o">.</span><span class="na">getSimpleName</span><span class="o">()).</span><span class="na">list</span><span class="o">();</span>
</code></pre></div></div>

<p><strong>Compatibility with existing filters</strong> <code class="language-plaintext highlighter-rouge">CtQueryable#filterChildren(Filter)</code> is a filtering query that can be chained:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// collecting all methods of deprecated classes</span>
<span class="n">list2</span> <span class="o">=</span> <span class="n">rootPackage</span>
    <span class="o">.</span><span class="na">filterChildren</span><span class="o">(</span><span class="k">new</span> <span class="nc">AnnotationFilter</span><span class="o">(</span><span class="nc">Deprecated</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">list</span><span class="o">()</span>
</code></pre></div></div>

<p>A boolean return value of the lambda tells whether the elements are selected for inclusion or not.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// creating a custom filter to select all public fields using java 8 lambda</span>
<span class="n">list3</span> <span class="o">=</span> <span class="n">rootPackage</span><span class="o">.</span><span class="na">filterChildren</span><span class="o">((</span><span class="nc">CtField</span> <span class="n">field</span><span class="o">)-&gt;</span><span class="n">field</span><span class="o">.</span><span class="na">getModifiers</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="nc">ModifierKind</span><span class="o">.</span><span class="na">PUBLIC</span><span class="o">)).</span><span class="na">list</span><span class="o">();</span>
</code></pre></div></div>

<p><strong>Chaining</strong> If the <code class="language-plaintext highlighter-rouge">CtFunction</code> returns an object, this object is given as result to the next step of the query.
All results of the last query step are results of the query. The results of intermediate steps are not results of the query.:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// a query which processes all not deprecated methods of all deprecated classes</span>
<span class="n">rootPackage</span>
  <span class="o">.</span><span class="na">filterChildren</span><span class="o">((</span><span class="nc">CtClass</span> <span class="n">clazz</span><span class="o">)-&gt;</span><span class="n">clazz</span><span class="o">.</span><span class="na">getAnnotation</span><span class="o">(</span><span class="nc">Deprecated</span><span class="o">.</span><span class="na">class</span><span class="o">)!=</span><span class="kc">null</span><span class="o">)</span>
  <span class="o">.</span><span class="na">map</span><span class="o">((</span><span class="nc">CtClass</span> <span class="n">clazz</span><span class="o">)-&gt;</span><span class="n">clazz</span><span class="o">.</span><span class="na">getMethods</span><span class="o">())</span>
  <span class="o">.</span><span class="na">map</span><span class="o">((</span><span class="nc">CtMethod</span><span class="o">&lt;?&gt;</span> <span class="n">method</span><span class="o">)-&gt;</span><span class="n">method</span><span class="o">.</span><span class="na">getAnnotation</span><span class="o">(</span><span class="nc">Deprecated</span><span class="o">.</span><span class="na">class</span><span class="o">)==</span><span class="kc">null</span><span class="o">)</span>
  <span class="o">.</span><span class="na">list</span><span class="o">()</span>
<span class="o">;</span>
</code></pre></div></div>

<p>Finally, if the <code class="language-plaintext highlighter-rouge">CtFunction</code> returns and Iterable or an Array then each item of the collection/array is sent to next query step or result.</p>

<p><strong>Query reuse</strong>. Method <code class="language-plaintext highlighter-rouge">setInput</code> allows you to reuse the same query over multiple inputs. 
In such case it makes sense to create unbound query using <code class="language-plaintext highlighter-rouge">Factory#createQuery()</code>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// here is the query</span>
<span class="nc">CtQuery</span> <span class="n">q</span> <span class="o">=</span> <span class="n">factory</span><span class="o">.</span><span class="na">createQuery</span><span class="o">().</span><span class="na">map</span><span class="o">((</span><span class="nc">CtClass</span> <span class="n">c</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">c</span><span class="o">.</span><span class="na">getSimpleName</span><span class="o">());</span>
<span class="c1">// using it on a first input</span>
<span class="nc">String</span> <span class="n">s1</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="na">setInput</span><span class="o">(</span><span class="n">cls</span><span class="o">).</span><span class="na">list</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
<span class="c1">// using it on a second input</span>
<span class="nc">String</span> <span class="n">s2</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="na">setInput</span><span class="o">(</span><span class="n">cls2</span><span class="o">).</span><span class="na">list</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
</code></pre></div></div>

<p><strong>Query evaluation</strong>. Each example above use <code class="language-plaintext highlighter-rouge">CtQuery#list()</code> to evaluate the query.
The <code class="language-plaintext highlighter-rouge">list</code> method evaluates the query and returns the <code class="language-plaintext highlighter-rouge">List</code>, which contains all the results of the query.</p>

<p>But it is not the only way how to evaluate query. There is <code class="language-plaintext highlighter-rouge">CtQuery#forEach(CtConsumer)</code>, 
which sends each query result to the <code class="language-plaintext highlighter-rouge">CtConsumer#accept</code> function. 
It is more efficient in cases when query results can be immediately processed.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//prints each deprecated element</span>
<span class="n">rootPackage</span>
    <span class="o">.</span><span class="na">filterChildren</span><span class="o">(</span><span class="k">new</span> <span class="nc">AnnotationFilter</span><span class="o">(</span><span class="nc">Deprecated</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">forEach</span><span class="o">((</span><span class="nc">CtElement</span> <span class="n">ele</span><span class="o">)-&gt;</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">ele</span><span class="o">));</span>
</code></pre></div></div>

<p>Finally there is <code class="language-plaintext highlighter-rouge">CtQuery#first()</code>, 
which evaluates the query until first query result is found.
Then the evaluation is terminated and first result is returned. 
It is faster than <code class="language-plaintext highlighter-rouge">query.list().get(0)</code>, because query engine does not collect other results.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// returns first deprecated element</span>
<span class="nc">CtElement</span> <span class="n">firstDeprecated</span> <span class="o">=</span> <span class="n">rootPackage</span><span class="o">.</span><span class="na">filterChildren</span><span class="o">(</span><span class="k">new</span> <span class="nc">AnnotationFilter</span><span class="o">(</span><span class="nc">Deprecated</span><span class="o">.</span><span class="na">class</span><span class="o">)).</span><span class="na">first</span><span class="o">();</span>
</code></pre></div></div>






















































































































































</div>

<hr class="shaded"/> 

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               	<a href="https://github.com/INRIA/spoon/issues/new">Contact / Feedback / Question / Bug Report</a><br />
                </div>
            </div>
        </footer>

      </div><!-- /.row -->

    </div>    <!-- /.container -->

  </body>

  
  <!-- the google_analytics_id gets auto inserted from the config file -->


<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-24273081-1', 'auto');
    ga('send', 'pageview');
</script>

  

</html>

